--- a/configure	2022-03-14 19:04:27.000000000 -0300
+++ b/configure	2023-01-14 08:34:29.287718255 -0300
@@ -2,12 +2,14 @@
 # some elements originated from qemu configure
 set -e
 
-TMPC="/tmp/pcsx-conf-${RANDOM}-$$-${RANDOM}.c"
-TMPO="/tmp/pcsx-conf-${RANDOM}-$$-${RANDOM}.o"
-TMPB="/tmp/pcsx-conf-${RANDOM}-$$-${RANDOM}"
+TMPC="${PREFIX}/tmp/pcsx-conf-${RANDOM}-$$-${RANDOM}.c"
+TMPO="${PREFIX}/tmp/pcsx-conf-${RANDOM}-$$-${RANDOM}.o"
+TMPB="${PREFIX}/tmp/pcsx-conf-${RANDOM}-$$-${RANDOM}"
 trap "rm -f $TMPC $TMPO $TMPB" EXIT INT QUIT TERM
 rm -f config.log
 
+CFLAGS="${CFLAGS} -I${PREFIX}/include"
+
 compile_object()
 {
   c="$CC $CFLAGS -c $TMPC -o $TMPO $@"
@@ -69,13 +71,13 @@
 CXX="${CXX-${CROSS_COMPILE}g++}"
 AS="${AS-${CROSS_COMPILE}as}"
 AR="${AS-${CROSS_COMPILE}ar}"
-MAIN_LDLIBS="$LDLIBS -ldl -lm -lpthread"
+MAIN_LDLIBS="$LDLIBS -ldl -lm -lc"
 config_mak="config.mak"
 
 fail()
 {
   echo "$@"
-  if test -n "$DUMP_CONFIG_LOG"; then cat config.log; fi
+  cat config.log
   exit 1
 }
 
@@ -398,7 +400,7 @@
     sound_drivers="$sound_drivers pulseaudio"
     MAIN_LDLIBS="-lpulse $MAIN_LDLIBS"
   fi
-  if [ "$need_sdl" = "yes" ] || check_sdl `sdl-config --cflags --libs`; then
+  if [ "$need_sdl" = "yes" ] || check_sdl `@TERMUX_PREFIX@/bin/sdl-config --cflags --libs`; then
     sound_drivers="$sound_drivers sdl"
     need_sdl="yes"
   fi
@@ -417,10 +419,10 @@
 fi
 
 if [ "$need_sdl" = "yes" ]; then
-  which sdl-config > /dev/null || \
+  which @TERMUX_PREFIX@/bin/sdl-config > /dev/null || \
     fail "sdl-config is missing; please install libsdl (libsdl1.2-dev)"
-  CFLAGS="$CFLAGS `sdl-config --cflags`"
-  MAIN_LDLIBS="`sdl-config --libs` $MAIN_LDLIBS"
+  CFLAGS="$CFLAGS `@TERMUX_PREFIX@/bin/sdl-config --cflags`"
+  MAIN_LDLIBS="`@TERMUX_PREFIX@/bin/sdl-config --libs` $MAIN_LDLIBS"
   check_sdl || fail "please install libsdl (libsdl1.2-dev)"
 fi
 
